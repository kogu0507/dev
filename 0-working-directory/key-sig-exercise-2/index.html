<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>調号エクササイズ</title>
    <link rel="stylesheet" href="./assets/style.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/kogu0507/module@v2.0.1/components/simple-tab-component/style.min.css">
    <script src="https://cdn.jsdelivr.net/gh/kogu0507/module@v2.0.1/components/simple-tab-component/script.min.js"
        defer></script>
    <script type="module" src="./script.js" defer></script>
</head>

<body>
    <h2>調号エクササイズ</h2>

    <div id="simple-tab-component" class="simple-tab-component-container" data-default-tab="intro"
        data-deep-link="true" data-on-tab-change="handleModeTabChange">
        <div class="tabs" role="tablist">
            <button class="tab-button" data-tab="intro" id="tab-btn-intro">調号→調名</button>
            <button class="tab-button" data-tab="name2sig" id="tab-btn-name2sig">調名→調号</button>
            <button class="tab-button" data-tab="summary" id="tab-btn-summary">設定</button>
        </div>
        <div class="tab-content">
            <!-- 調号→調名モード -->
            <div id="intro" class="tab-pane" role="tabpanel" aria-labelledby="tab-btn-intro">
                <div id="question-s2n">
                    <div id="question-status"></div>
                    <div id="question-viewer" class="verovio-viewer"></div>
                    <p>あなたの答え：</p>
                    <div class="tables-wrapper">
                        <div>
                            <p>長調：</p>
                            <table class="key-select-table" id="major-key-grid"></table>
                        </div>
                        <div>
                            <p>短調：</p>
                            <table class="key-select-table" id="minor-key-grid"></table>
                        </div>
                    </div>
                    <button id="submitAnswerBtn" disabled>解答を送信</button>
                    <div id="submit-notification" class="notification-message"></div>
                </div>

                <!-- 答え合わせパネル -->
                <div id="answer-s2n" class="hidden">
                    <div id="answer-feedback"></div>
                    <p>あなたの答え：<br>
                        <span id="displayUserMajorAnswer"></span> /
                        <span id="displayUserMinorAnswer"></span>
                    </p>
                    <p>正解：<br>
                        日本語）<span id="displayCorrectAnswerJp"></span><br>
                        英語）<span id="displayCorrectAnswerEn"></span><br>
                        ドイツ語）<span id="displayCorrectAnswerDe"></span>
                    </p>
                    <div id="answer-viewer" class="verovio-viewer"></div>
                    <div id="answer-status"></div>
                    <button id="generate-new-question-btn">新しい問題を生成</button>
                    <div id="new-question-notification" class="notification-message"></div>
                </div>
            </div>

            <!-- 調名→調号モード -->
            <div id="name2sig" class="tab-pane hidden" role="tabpanel" aria-labelledby="tab-btn-name2sig">
                <!-- 問題パネル -->
                <div id="question-n2s">
                    <div id="name2sig-status">譜例を矢印で操作して調号を作ってください</div>
                    <div style="display:flex;align-items:center;gap:1em;margin:1em 0;">
                        <button id="decreaseAccBtn" title="フラットを増やす">← ♭</button>
                        <div id="name2sig-viewer" class="verovio-viewer"></div>
                        <button id="increaseAccBtn" title="シャープを増やす">♯ →</button>
                    </div>
                    <button id="submitName2SigBtn" disabled>解答を送信</button>
                    <div id="name2sig-notification" class="notification-message"></div>
                </div>

                <!-- 答え合わせパネル -->
                <div id="answer-n2s" class="hidden">
                    <div id="name2sig-feedback"></div>
                    <p>あなたの答え： <span id="displayN2SUserAnswer"></span></p>
                    <p>正解： <span id="displayN2SCorrectAnswer"></span></p>
                    <div id="name2sig-answer-viewer" class="verovio-viewer"></div>
                    <button id="generate-n2s-question-btn">新しい問題を生成</button>
                    <div id="new-n2s-notification" class="notification-message"></div>
                </div>
            </div>


            <!-- 設定タブ -->
            <div id="summary" class="tab-pane" role="tabpanel" aria-labelledby="tab-btn-summary">
                <p>音名の言語</p>
                <div id="language-selector">
                    <label><input type="radio" name="lang" value="ja" checked> 日本語</label>
                    <label><input type="radio" name="lang" value="en"> English</label>
                    <label><input type="radio" name="lang" value="de"> Deutsch</label>
                </div>
            </div>
        </div>
    </div>
</body>

</html>